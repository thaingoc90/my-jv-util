<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>
	<comment>SQL/DB Commenturations for NHP Web</comment>
	
	<entry key="_tbl.comment">nhp_comment</entry>
	<entry key="_tbl.comment.key.where">comment_id=@{comment_id} AND token=@{token} AND target_id=@{target_id}</entry>
	<entry key="_cols.comment.select"><![CDATA[comment_id, account_name, CONVERT(content USING utf8) AS content ,target_id ,token ,created ,updated ,status ,approved_by, updated_by ,parent_comment_id ,total_likes  ]]></entry>
	<entry key="_cols.comment.insert"><![CDATA[(comment_id, account_name, content ,target_id ,token ,created ,updated ,status ,parent_comment_id) VALUES (@{comment_id}, @{account_name}, @{content} ,@{target_id} ,@{token} ,NOW() ,NOW() ,@{status} ,@{parent_comment_id})]]></entry>
	<entry key="_cols.comment.update"><![CDATA[content=@{content} ,updated=NOW() ,updated_by=@{updated_by}]]></entry>
	<entry key="_cols.comment.update.approve"><![CDATA[status=@{status} ,updated=NOW() ,approved_by=@{approved_by}]]></entry>

	<entry key="sql.getComment"><![CDATA[
        SELECT ${_cols.comment.select} FROM ${_tbl.comment} WHERE ${_col.comment.key.where}
    ]]></entry>
	<entry key="sql.addComment"><![CDATA[
        INSERT INTO ${_tbl.comment} ${_cols.comment.insert} 
    ]]></entry>
	<entry key="sql.deleteComment"><![CDATA[
        DELETE FROM ${_tbl.comment} WHERE ${_col.comment.key.where} 
    ]]></entry>
	<entry key="sql.updateComment"><![CDATA[
        UPDATE ${_tbl.comment} SET ${_cols.comment.update} WHERE ${_col.comment.key.where} 
    ]]></entry>
    <entry key="sql.approveComment"><![CDATA[
        UPDATE ${_tbl.comment} SET ${_cols.comment.update.approve} WHERE ${_col.comment.key.where} 
    ]]></entry>
    <entry key="sql.getChildComments"><![CDATA[
        SELECT ${_cols.comment.select} FROM ${_tbl.comment} WHERE parent_comment_id=@{parent_comment_id} AND token=@{token} AND target_id=@{target_id} ORDER BY created DESC
    ]]></entry>
    <entry key="sql.getCommentsByTarget"><![CDATA[
        SELECT ${_cols.comment.select} FROM ${_tbl.comment} WHERE token=@{token} AND target_id=@{target_id} AND (@{ignore_status} OR status=@{status}) ORDER BY created DESC LIMIT @{start_index}, @{page_size}  
    ]]></entry>
</properties>